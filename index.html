<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>arc/DSTNY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <!-- BEGIN PATCH: intro screen -->
  <div id="welcome-overlay" class="welcome-overlay">
    <div class="welcome-overlay__backdrop"></div>
    <div class="welcome-overlay__content">
      <p class="welcome-kicker">Bienvenido a</p>
      <div class="welcome-logo">arc/DSTNY</div>
      <p class="welcome-legend">arc/DSTNY · All Rights Reserved</p>
      <button id="enter-btn" class="welcome-btn">Entrar</button>
    </div>
  </div>
  <!-- END PATCH -->

  <div id="app">
    <!-- Barra superior: estado de jugadores + Oráculo centrado (sticky) -->
    <header class="top-bar">
      <!-- Bloque LP Jugador -->
      <div class="lp-block">
        <div id="player-avatar" class="lp-avatar avatar-sigil-1" aria-label="Avatar jugador"></div>
        <div class="lp-info">
          <div class="lp-label" id="player-name">Jugador</div>
          <div id="player-lp" class="lp-value">30 LP</div>
          <!-- Barra de vida estilo TCG -->
          <div id="player-lp-wrapper" class="lp-bar-wrapper">
            <div class="lp-bar-bg">
              <div id="player-lp-bar" class="lp-bar-fill"></div>
            </div>
            <span id="player-lp-percent" class="lp-bar-text">100%</span>
          </div>
        </div>
      </div>

      <!-- Bloque LP Oponente -->
      <div class="lp-block">
        <div id="opponent-avatar" class="lp-avatar avatar-sigil-2" aria-label="Avatar oponente"></div>
        <div class="lp-info">
          <div class="lp-label">Oponente</div>
          <div id="opponent-lp" class="lp-value">30 LP</div>
          <!-- Barra de vida estilo TCG -->
          <div id="opponent-lp-wrapper" class="lp-bar-wrapper">
            <div class="lp-bar-bg">
              <div id="opponent-lp-bar" class="lp-bar-fill"></div>
            </div>
            <span id="opponent-lp-percent" class="lp-bar-text">100%</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Zona central -->
    <main class="stage">
      <!-- BEGIN PATCH: battlefield layout -->
      <section class="battle-layout">
        <!-- Lado jugador -->
        <section class="player-zone">
          <h2>Campo del Jugador</h2>

          <div class="field-grid player-field-grid">
            <div class="card-block field-arcano">
              <div id="player-arcano-visual" class="card-visual"></div>
              <div class="card-info">
                <div id="player-arcano-title" class="card-title"></div>
                <div id="player-arcano-info" class="card-extra"></div>
                <div id="player-arcano-attrs" class="card-attrs"></div>
              </div>
            </div>

            <div class="support-cards">
              <div class="support-card-row card-slot field-destino">
                <div class="slot-header">Destino:</div>
                <div class="slot-body">
                  <span id="player-destino-badge" class="support-placeholder" aria-hidden="true"></span>
                  <div class="support-stack">
                    <span id="player-destino-info" class="support-value"></span>
                  </div>
                </div>
              </div>
              <div class="support-card-row card-slot field-deidad">
                <div class="slot-header">Dioses:</div>
                <div class="slot-body">
                  <span id="player-deidad-badge" class="support-placeholder" aria-hidden="true"></span>
                  <div class="support-stack">
                    <span id="player-deidad-info" class="support-value"></span>
                  </div>
                </div>
               </div>
               <div class="support-card-row card-slot field-spirit">
                <div class="slot-header">Representante espiritual:</div>
                <div class="slot-body">
                  <span id="player-spirit-badge" class="support-placeholder" aria-hidden="true"></span>
                  <div class="support-stack">
                    <span id="player-spirit-info" class="support-value"></span>
                  </div>
                </div>
              </div>
              <div class="support-card-row card-slot field-element">
                <div class="slot-header">Efecto elemental:</div>
                <div class="slot-body">
                  <span id="player-element-badge" class="support-placeholder" aria-hidden="true"></span>
                  <div class="support-stack">
                    <span id="player-element-info" class="support-value"></span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Oráculo ampliado (vista única) -->
        <section id="oracle-slot-main" class="oracle-zone oracle-zone-expanded">
          <div class="oracle-top-block">
            <div class="oracle-header oracle-header--centered">
              <h2 id="oracle-title">Oráculo</h2>
              <div class="oracle-actions">
                <button id="theme-toggle" class="theme-toggle" aria-label="Cambiar tema">
                  Oscuro
                </button>
              </div>
            </div>
            <div id="oracle-phase-steps" class="oracle-steps"></div>
            <div id="oracle-message" class="oracle-message oracle-state-line">
              El Oráculo espera tu elección.
            </div>
            <div class="oracle-log-shell">
              <div id="oracle-log" class="oracle-log oracle-log-console"></div>
            </div>
            <button id="btn-export-log" class="export-btn">
              Exportar registro del Oráculo
            </button>
          </div>
        </section>

        <!-- Lado oponente -->
        <section class="opponent-zone">
          <h2>Campo del Oponente</h2>

            <div class="field-grid opponent-field-grid">
              <div class="card-block field-arcano">
                <div id="opponent-arcano-visual" class="card-visual"></div>
                <div class="card-info">
                  <div id="opponent-arcano-title" class="card-title">???</div>
                  <div id="opponent-arcano-info" class="card-extra"></div>
                  <div id="opponent-arcano-attrs" class="card-attrs"></div>
                </div>
              </div>

              <div class="support-cards">
                <div class="support-card-row card-slot field-destino">
                  <div class="slot-header">Destino:</div>
                  <div class="slot-body">
                    <span id="opponent-destino-badge" class="support-placeholder" aria-hidden="true"></span>
                    <div class="support-stack">
                      <span id="opponent-destino-info" class="support-value">???</span>
                    </div>
                  </div>
                </div>
                <div class="support-card-row card-slot field-deidad">
                  <div class="slot-header">Dioses:</div>
                  <div class="slot-body">
                    <span id="opponent-deidad-badge" class="support-placeholder" aria-hidden="true"></span>
                    <div class="support-stack">
                      <span id="opponent-deidad-info" class="support-value">???</span>
                    </div>
                  </div>
                </div>
                <div class="support-card-row card-slot field-spirit">
                  <div class="slot-header">Representante espiritual:</div>
                  <div class="slot-body">
                    <span id="opponent-spirit-badge" class="support-placeholder" aria-hidden="true"></span>
                    <div class="support-stack">
                      <span id="opponent-spirit-info" class="support-value"></span>
                    </div>
                  </div>
                </div>
                <div class="support-card-row card-slot field-element">
                  <div class="slot-header">Efecto elemental:</div>
                  <div class="slot-body">
                    <span id="opponent-element-badge" class="support-placeholder" aria-hidden="true"></span>
                    <div class="support-stack">
                      <span id="opponent-element-info" class="support-value">???</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </section>
      </section>
      <!-- END PATCH -->

      <!-- Zona de soporte -->
      <section class="support-zone">
        <div class="codex-card">
          <h3>Códice del Grimorio</h3>
          <p class="codex-line"><strong>Condición de activación:</strong> si tus 2 atributos elegidos cruzan con los del rival en una línea válida, podés anular uno de sus atributos.</p>
          <p class="codex-line"><strong>Riesgo del Códice:</strong> si el trazo falla, el Códice te castiga con daño directo.</p>
        </div>
      </section>
    </main>

    <!-- Panel superpuesto del Códice del Grimorio -->
    <div id="grimorio-panel" class="codex-overlay">
      <div class="codex-overlay__content">
        <h3 class="codex-overlay__title">Códice del Grimorio</h3>
        <div id="codex-table" class="codex-table"></div>
        <div id="codex-legend" class="codex-legend">
          <p><strong>Condición de activación:</strong> si tus 2 atributos elegidos cruzan con los del rival en una línea válida, podés anular uno de sus atributos.</p>
          <p><strong>Riesgo del Códice:</strong> si el trazo falla, el Códice te castiga con daño directo.</p>
        </div>
      </div>
    </div>

    <!-- Modal inicial de configuración -->
    <div id="game-setup-modal" class="modal-backdrop hidden">
      <div class="modal">
        <h3>Configurar partida</h3>
        <label class="modal-label" for="player-name-input">Nombre del jugador</label>
        <input id="player-name-input" class="modal-input" type="text" placeholder="Ingresa tu nombre" />
        <div class="modal-label">Modo de partida</div>
        <div class="mode-options">
          <label class="mode-option">
            <input type="radio" name="mode" value="80" />
            Larga (80 LP)
          </label>
          <label class="mode-option">
            <input type="radio" name="mode" value="50" checked />
            Normal (50 LP)
          </label>
          <label class="mode-option">
            <input type="radio" name="mode" value="30" />
            Corta (30 LP)
          </label>
        </div>
        <label class="modal-label" for="elemental-select">Efecto elemental (1 uso por partida)</label>
        <select id="elemental-select" class="modal-input"></select>
        <label class="modal-label">Avatar del jugador</label>
        <div class="mode-options avatar-options">
          <label class="mode-option">
            <input type="radio" name="avatar" value="avatar-sigil-1" checked />
            Sello Celeste
          </label>
          <label class="mode-option">
            <input type="radio" name="avatar" value="avatar-sigil-2" />
            Sello Carmesí
          </label>
          <label class="mode-option">
            <input type="radio" name="avatar" value="avatar-sigil-3" />
            Sello Esmeralda
          </label>
        </div>
        <label class="modal-label">Modo de visualización</label>
        <div class="mode-options view-mode-options">
          <label class="mode-option">
            <input type="radio" name="view-mode" value="text" checked />
            Elemental (solo texto)
          </label>
          <label class="mode-option">
            <input type="radio" name="view-mode" value="emoji" />
            Emojis
          </label>
          <label class="mode-option">
            <input type="radio" name="view-mode" value="card" />
            Cartas (texto + emoji + imagen)
          </label>
        </div>
        <button id="start-game-btn" class="control-btn control-btn--primary modal-start-btn">Comenzar partida</button>
      </div>
    </div>

    <footer class="controls-bar">
      <div id="turn-controls"></div>
      <div class="brand-footer"></div>
    </footer>
  </div>

  <!-- Punto de entrada JS -->
  <script type="module" src="js/main.js"></script>
</body>

</html>
